<div class="reservas-container">
  <h2>Reservas Realizadas</h2>
  
  @if (cargando()) {
    <div class="loading">
      <p>Cargando reservas...</p>
    </div>
  }

  @if (error()) {
    <div class="error">
      <p>{{ error() }}</p>
    </div>
  }

  @if (!cargando() && !error()) {
    <div class="reservas-header">
      <p>Total de reservas: <strong>{{ reservasComputed().length }}</strong></p>
    </div>

    @if (reservasComputed().length === 0) {
      <div class="no-data">
        <p>No hay reservas registradas a√∫n.</p>
      </div>
    } @else {
      <div class="reservas-grid">
        @for (reserva of reservasComputed(); track reserva.id) {
          <div class="reserva-card">
            <div class="reserva-header">
              <h3>{{ reserva.name }}</h3>
              <span class="reserva-id">ID: {{ reserva.id }}</span>
            </div>
            
            @if (getVehicleImage(reserva.vehicleId)) {
              <div class="vehicle-image">
                <img [src]="getVehicleImage(reserva.vehicleId)" 
                     [alt]="getVehicleInfo(reserva.vehicleId)"
                     onerror="this.style.display='none'">
              </div>
            }
            
            <div class="reserva-info">
              <div class="info-section">
                <h4>Informaci√≥n del Cliente</h4>
                <div class="info-row">
                  <span class="label">Email:</span>
                  <span class="value">{{ reserva.email }}</span>
                </div>
                
                <div class="info-row">
                  <span class="label">Tel√©fono:</span>
                  <span class="value">{{ reserva.phone }}</span>
                </div>
              </div>
              
              <div class="info-section">
                <h4>Detalles de la Reserva</h4>
                <div class="info-row">
                  <span class="label">Veh√≠culo:</span>
                  <span class="value vehicle-info">{{ getVehicleInfo(reserva.vehicleId) }}</span>
                </div>
                
                <div class="info-row">
                  <span class="label">Fecha de Visita:</span>
                  <span class="value date-info">{{ formatDate(reserva.date) }}</span>
                </div>
                
                @if (reserva.userId) {
                  <div class="info-row">
                    <span class="label">Usuario ID:</span>
                    <span class="value">{{ reserva.userId }}</span>
                  </div>
                }
              </div>
            </div>
            
            <div class="reserva-actions">
              <button class="delete-btn" 
                      (click)="eliminarReserva(reserva)"
                      title="Eliminar reserva">
                üóëÔ∏è Eliminar Reserva
              </button>
            </div>
          </div>
        }
      </div>
    }
  }
</div>